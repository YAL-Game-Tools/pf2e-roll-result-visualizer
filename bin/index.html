<!DOCTYPE html>
<html><head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width" />
	<title>YAL's PF2e roll result visualizer</title>
	<link rel="stylesheet" href="style.css?v=AUTO_DATE"/>
	<link rel="stylesheet" href="night.css?v=AUTO_DATE"/>
	<script defer="" src="https://cloud.umami.is/script.js" data-website-id="5e27083a-c054-4136-9592-b43ac60a5e84"></script>
</head><body>
	<main>
		<input id="night" type="checkbox"/>
		<label for="night"></label>
		<h1>YAL's PF2e roll result visualizer</h1>
		<script>(function() {
			var key = "roll-result-vis-night";
			var cb = document.getElementById("night");
			var value = null;
			try {
				value = localStorage.getItem(key) == "1";
			} catch (_) {}
			if (value == null) {
				value = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			}
			function sync() {
				if (cb.checked) document.body.classList.add("night"); else document.body.classList.remove("night");
			}
			cb.checked = value;
			cb.onchange = function() {
				sync();
				try {
					localStorage.setItem(key, cb.checked ? "1" : "0");
				} catch (_) {}
			};
			sync();
		})()</script>
		
		<div style="display: flex; margin-bottom: 0.3em; gap: 0.25em" id="in-notes-div">
			<input id="in-notes" type="text" placeholder="Label/notes for screenshots" style="flex-grow: 1"/>
			<input type="button" value="copy" id="in-copy" />
			<input type="text" id="in-paste" placeholder="paste here" style="width: 5em"/>
		</div>
		<div class="table" id="in-main">
			<div>
				<input id="in-bonus" type="number" value="14"/>
			</div><div>
				Bonus
			</div>
			<div>
				<input id="in-attempts" type="number" value="1"/>
			</div><div>
				Attempts
			</div>
			<div>
				<input id="in-dc" type="number" value="19"/>
			</div><div>
				Difficulty Class
			</div>
			<div>
				<input id="in-map" type="text" value="" placeholder="-5"/>
			</div><div title='Can be things like "-2 -10" for Double Slice or "-5 -5" for Exacting Strike'>
				<abbr title="Multiple attack penalty">MAP</abbr>
			</div>
			<div>
				<select id="in-roll-mode">
					<option selected value="1">Roll once</option>
					<option value="2kh">Keep Higher</option>
					<option value="2kl">Keep Lower</option>
					<!-- <option value="followup">Follow-up Strike</option> -->
				</select>
			</div><div title="For fortune/misfortune, Sure Strike, Devise a Stratagem tricks, etc.">
				Roll mode
			</div>
		</div>
		
		<fieldset class="hide">
			<legend>Rarer options</legend>
			<div class="table" id="in-rarer">
				<div class="checkbox">
					<input id="in-roll-table" type="checkbox" disabled/>
				</div><div>
					Show 2d roll table
				</div>
				<div class="checkbox">
					<input id="in-keen-flair" type="checkbox"/>
				</div><div>
					<a href="https://2e.aonprd.com/Classes.aspx?ID=63" rel="external">Keen Flair</a>
				</div>
				<div>
					<input id="in-flat-checks" type="text" placeholder="6, 5" autocomplete="off"/>
				</div><div title="Like 5 for Concealed, 11 for Hidden, 6+ for Stupefied">
					Flat checks
				</div>
			</div>
		</fieldset>
		
		<fieldset class="hide">
			<legend>Efficiency</legend>
			<div class="table" id="in-efficiency">
				<div class="checkbox">
					<input id="in-use-efficiency" type="checkbox">
				</div><div>
					Calculate
				</div>
				<div>
					<select id="in-efficiency-presets">
						<option value="0/0/100/200" selected>Strike</option>
						<option value="-100/0/100/200">Shove</option>
						<option value="-100/0/100/110">Trip</option>
						<option value="0/50/100/200">Save</option>
					</select>
				</div><div>
					Presets
				</div>
				<div>
					<input id="in-efficiency-0" type="number" value="0"/>
				</div><div>
					Critical failure
				</div>
				<div>
					<input id="in-efficiency-1" type="number" value="0"/>
				</div><div>
					Failure
				</div>
				<div>
					<input id="in-efficiency-2" type="number" value="100"/>
				</div><div>
					Success
				</div>
				<div>
					<input id="in-efficiency-3" type="number" value="200"/>
				</div><div>
					Critical success
				</div>
			</div>
			<div id="efficiency-div">
				Efficiency total: <span id="efficiency-result"></span><br/>
				Reference:
				<input type="number" id="in-efficiency-ref" style="width: 4em"/>
				<input type="button" id="in-efficiency-store" value="store"/>
				<input type="button" id="in-efficiency-clear" value="clear"/>
			</div>
		</fieldset>
		
		<fieldset class="hide">
			<legend>Multi-hit</legend>
			<div class="table" id="in-multi">
				<div class="checkbox">
					<input id="in-use-multi" type="checkbox">
				</div><div>
					Calculate
				</div>
				<div class="checkbox">
					<input id="in-multi-table" type="checkbox">
				</div><div>
					Show table
				</div>
			</div>
			<div id="multi-out">
			</div>
			<input type="button" id="in-multi-store" value="store"/>
			<input type="button" id="in-multi-clear" value="clear"/>
		</fieldset>
		
		<div id="results"></div>
		
		<fieldset>
			<legend>About this tool</legend>
			<p>
				For the burning Pathfinder 2nd edition questions like
				"does it make sense to grapple this enemy",
				"how much does a +1 status bonus help",
				or "should I attack with MAP?".
			</p><p>
				See <a href="https://2e.aonprd.com/Rules.aspx?ID=2278">AoN</a> for full rules.
			</p><p>
				A tool by <a href="https://yal.cc/">YellowAfterlife</a>, written in <a href="https://haxe.org">Haxe</a> (<a href="https://github.com/YAL-Game-Tools/pf2e-roll-result-visualizer">source code</a>).
			</p>
		</fieldset>
		
		<script src="script.js?v=AUTO_DATE"></script>
	</main>
</body></html>
